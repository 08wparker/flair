# Task 4: Hypoxic Failure Proportion Prediction
# Regression: Predict proportion of hypoxic hours in 24-72hr window

task:
  name: task4_hypoxic_proportion
  display_name: "Hypoxic Failure Proportion"
  description: "Predict proportion of hypoxic respiratory failure hours (24-72hr window)"
  task_type: regression

input:
  window_hours: 24                # First 24 hours of ICU data
  prediction_window: [24, 72]     # Predict outcomes in 24-72hr window
  source: narratives

cohort:
  base: imv_only                  # Only patients on IMV at 24 hours (same as Task 3)
  filters:
    - imv_at_24hr == true

labels:
  column: task4_proportion
  value_range: [0.0, 1.0]         # Proportion between 0 and 1
  description: "Fraction of hours with SpO2 < 90% or PaO2/FiO2 < 200"

evaluation:
  primary_metric: mse
  metrics:
    - mse
    - rmse
    - mae
    - r2
    - explained_variance
  subgroups:
    - age_group
    - sex_category

output:
  format: parquet
  files:
    - wide_dataset.parquet
    - labels.parquet
    - demographics.parquet
